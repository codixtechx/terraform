version: 3
projects:
  - name: staging
    workflow: staging
    dir: ./staging
    workspace: staging
    autoplan:
      enabled: true

# - dir: ./staging
#   workflow: staging # could also be custom2 OR default
# - dir: ./production
#   workflow: production # could also be custom2 OR default


# workflows:
#   staging:
#     plan:
#       steps:
#       - init
#       - plan:
#           extra_args: ["-var-file", "staging.tfvars"]
#     # NOTE: no need to define the apply stage because it will default
#     # to the normal apply stage.
    
#   production:
#     plan:
#       steps:
#       - init
#       - plan:
#           extra_args: ["-var-file", "production.tfvars"]
#     apply:
#       steps:
#         - apply:
#             extra_args: ["-var-file", "production.tfvars"]
#     import:
#       steps:
#         - init
#         - import:
#             extra_args: ["-var-file", "production.tfvars"]
#     state_rm:
#       steps:
#         - init
#         - state_rm:
#             extra_args: ["-lock=false"]
# atlantis.yaml
# version: 3
# projects:
# # If two or more projects have the same dir and workspace, they must also have
# # a 'name' key to differentiate them.
# - name: project1-staging
#   dir: ./
#   workflow: staging
# - name: project1-production
#   dir: ./
#   workflow: production



######
# repos:
#   - id: /.*/
#     allowed_overrides: [workflow]
  # workflows:
  #   staging:
  #     plan:
  #       steps:
  #       - init
  #       - plan:
  #           extra_args: ["-var-file", "staging.tfvars"]
  #     # NOTE: no need to define the apply stage because it will default
  #     # to the normal apply stage.
      
  #   production:
  #     plan:
  #       steps:
  #       - init
  #       - plan:
  #           extra_args: ["-var-file", "production.tfvars"]
  #     apply:
  #       steps:
  #         - apply:
  #             extra_args: ["-var-file", "production.tfvars"]
  #     import:
  #       steps:
  #         - init
  #         - import:
  #             extra_args: ["-var-file", "production.tfvars"]
  #     state_rm:
  #       steps:
  #         - init
  #         - state_rm:
  #             extra_args: ["-lock=false"]
